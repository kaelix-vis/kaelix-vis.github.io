(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{321:function(e,t,r){"use strict";r.r(t);var n=r(14),l=(r(70),r(42),r(17),r(32),r(149),r(33),r(319),r(320),r(213),r(51)),o=r.n(l),c={name:"SearchBox",data:function(){return{searchQuery:"",imagePreview:null,data:null,loading:!1,error:null,selectedFile:null}},mounted:function(){},methods:{handleImageUpload:function(e){var t=e.target.files[0];t&&t.type.startsWith("image/")?(this.selectedFile=t,this.imagePreview=URL.createObjectURL(t)):(this.imagePreview=null,alert("Please upload a valid image."))},fetchData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.error=null,(r=new FormData).append("file",e.selectedFile,e.selectedFile.name),t.prev=4,t.next=7,o.a.post("http://13.201.177.217:5000/api/v1/visualSearch/image/",r,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}});case 7:n=t.sent,e.data=n.data.status,console.log("HIT",e.data.result.retrieved_images),e.loading=!1,t.next=18;break;case 13:t.prev=13,t.t0=t.catch(4),console.log("error",t.t0),e.error=t.t0.response?t.t0.response.data:"Something went wrong",e.loading=!1;case 18:case"end":return t.stop()}}),t,null,[[4,13]])})))()},gotoPage:function(){window.location.href="/search"}}},d=r(54),component=Object(d.a)(c,(function(){var e,t=this,r=t._self._c;return r("div",[r("form",{staticClass:"search-form",attrs:{id:"searchForm"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),t._v(" "),r("input",{staticClass:"image-upload",attrs:{type:"file",accept:"image/*"},on:{change:t.handleImageUpload}}),t._v(" "),r("button",{on:{click:function(e){return e.preventDefault(),t.gotoPage.apply(null,arguments)}}},[t._v("Go get it")])]),t._v(" "),t.imagePreview?r("div",{staticClass:"image-preview"},[r("img",{staticStyle:{padding:"0 42%"},attrs:{src:t.imagePreview,alt:"Uploaded Image"}}),t._v(" "),null!==(e=t.data)&&void 0!==e&&e.result?r("div",{staticStyle:{display:"flex",padding:"25px"}},t._l(t.data.result.retrieved_images,(function(e,n){return r("div",{key:n},[r("img",{staticClass:"image-preview result-img",attrs:{src:e}}),t._v(" "),r("h5",{staticStyle:{color:"black"}},[t._v(t._s(t.data.result.retrieved_brands[n]))]),t._v(" "),r("h4",{staticStyle:{color:"grey"}},[t._v(t._s(t.data.result.retrieved_titles[n]))])])})),0):t._e()]):t._e()])}),[],!1,null,null,null);t.default=component.exports}}]);